{"ast":null,"code":"const API_URL = 'http://localhost:5000/api';\nconst getToken = () => localStorage.getItem('userToken');\nconst apiFetch = async (endpoint, options = {}) => {\n  const token = getToken();\n  const headers = {\n    'Content-Type': 'application/json',\n    ...options.headers\n  };\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  const response = await fetch(`${API_URL}${endpoint}`, {\n    ...options,\n    headers\n  });\n  if (!response.ok) {\n    const errorData = await response.json();\n    throw new Error(errorData.message || 'Terjadi kesalahan pada server');\n  }\n  if (response.status === 204 || response.headers.get('Content-Length') === '0') {\n    return null;\n  }\n  return response.json();\n};\n\n// --- AUTH ---\nexport const login = (email, password) => apiFetch('/auth/login', {\n  method: 'POST',\n  body: JSON.stringify({\n    email,\n    password\n  })\n});\nexport const register = (email, password) => {\n  return apiFetch('/auth/register', {\n    // Pastikan endpoint-nya '/auth/register'\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n};\n// --- TRANSACTIONS (CRUD) ---\nexport const getTransactions = () => apiFetch('/transactions');\nexport const createTransaction = data => apiFetch('/transactions', {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\nexport const updateTransaction = (id, data) => apiFetch(`/transactions/${id}`, {\n  method: 'PUT',\n  body: JSON.stringify(data)\n});\nexport const deleteTransaction = id => apiFetch(`/transactions/${id}`, {\n  method: 'DELETE'\n});\n\n// --- CATEGORIES (CRUD) ---\nexport const getCategories = () => apiFetch('/categories');\nexport const createCategory = data => apiFetch('/categories', {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\nexport const updateCategory = (id, data) => apiFetch(`/categories/${id}`, {\n  method: 'PUT',\n  body: JSON.stringify(data)\n});\nexport const deleteCategory = id => apiFetch(`/categories/${id}`, {\n  method: 'DELETE'\n});\n\n// --- BUDGETS (Read & Update) ---\nexport const getBudgets = (year, month) => apiFetch(`/budgets?year=${year}&month=${month}`);\nexport const setBudget = data => apiFetch('/budgets', {\n  method: 'POST',\n  // Backend menggunakan POST untuk create/update\n  body: JSON.stringify(data)\n});\nexport const getAvailableBudgetMonths = async () => {\n  const token = localStorage.getItem('userToken'); // Asumsi token otentikasi diperlukan\n  if (!token) throw new Error(\"No authentication token found.\");\n  try {\n    // Sesuaikan URL endpoint ini dengan yang akan Anda buat di backend\n    const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/budgets/available_months`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to fetch available budget months');\n    }\n    // Backend diharapkan mengembalikan array string seperti [\"2023-01\", \"2023-02\", \"2024-05\"]\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(\"Error fetching available budget months:\", error);\n    throw error;\n  }\n};\n\n// --- ACCOUNTS ---\nexport const updateAccount = (id, data) => apiFetch(`/accounts/${id}`, {\n  method: 'PUT',\n  body: JSON.stringify(data)\n});\nexport const deleteAccount = id => apiFetch(`/accounts/${id}`, {\n  method: 'DELETE'\n});\nexport const getAccounts = () => apiFetch('/accounts');\nexport const createAccount = data => apiFetch('/accounts', {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\n\n// --- DEBTS ---\nexport const getDebts = () => apiFetch('/debts');\nexport const createDebt = data => apiFetch('/debts', {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\nexport const deleteDebt = id => apiFetch(`/debts/${id}`, {\n  method: 'DELETE'\n});\n\n// Menggunakan PATCH untuk update status\nexport const markDebtAsPaid = id => apiFetch(`/debts/${id}/status`, {\n  method: 'PATCH'\n});","map":{"version":3,"names":["API_URL","getToken","localStorage","getItem","apiFetch","endpoint","options","token","headers","response","fetch","ok","errorData","json","Error","message","status","get","login","email","password","method","body","JSON","stringify","register","getTransactions","createTransaction","data","updateTransaction","id","deleteTransaction","getCategories","createCategory","updateCategory","deleteCategory","getBudgets","year","month","setBudget","getAvailableBudgetMonths","process","env","REACT_APP_API_BASE_URL","error","console","updateAccount","deleteAccount","getAccounts","createAccount","getDebts","createDebt","deleteDebt","markDebtAsPaid"],"sources":["E:/testis/frontend/src/apiservice.js"],"sourcesContent":["const API_URL = 'http://localhost:5000/api';\r\n\r\nconst getToken = () => localStorage.getItem('userToken');\r\n\r\nconst apiFetch = async (endpoint, options = {}) => {\r\n  const token = getToken();\r\n  const headers = { 'Content-Type': 'application/json', ...options.headers };\r\n  if (token) {\r\n    headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n\r\n  const response = await fetch(`${API_URL}${endpoint}`, { ...options, headers });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json();\r\n    throw new Error(errorData.message || 'Terjadi kesalahan pada server');\r\n  }\r\n  if (response.status === 204 || response.headers.get('Content-Length') === '0') {\r\n      return null;\r\n  }\r\n  return response.json();\r\n};\r\n\r\n// --- AUTH ---\r\nexport const login = (email, password) => apiFetch('/auth/login', {\r\n  method: 'POST',\r\n  body: JSON.stringify({ email, password }),\r\n});\r\nexport const register = (email, password) => {\r\n  return apiFetch('/auth/register', { // Pastikan endpoint-nya '/auth/register'\r\n    method: 'POST',\r\n    body: JSON.stringify({ email, password }),\r\n  });\r\n};\r\n// --- TRANSACTIONS (CRUD) ---\r\nexport const getTransactions = () => apiFetch('/transactions');\r\nexport const createTransaction = (data) => apiFetch('/transactions', {\r\n  method: 'POST',\r\n  body: JSON.stringify(data),\r\n});\r\nexport const updateTransaction = (id, data) => apiFetch(`/transactions/${id}`, {\r\n  method: 'PUT',\r\n  body: JSON.stringify(data),\r\n});\r\nexport const deleteTransaction = (id) => apiFetch(`/transactions/${id}`, { method: 'DELETE' });\r\n\r\n// --- CATEGORIES (CRUD) ---\r\nexport const getCategories = () => apiFetch('/categories');\r\nexport const createCategory = (data) => apiFetch('/categories', {\r\n  method: 'POST',\r\n  body: JSON.stringify(data),\r\n});\r\nexport const updateCategory = (id, data) => apiFetch(`/categories/${id}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(data)\r\n});\r\nexport const deleteCategory = (id) => apiFetch(`/categories/${id}`, { method: 'DELETE' });\r\n\r\n\r\n// --- BUDGETS (Read & Update) ---\r\nexport const getBudgets = (year, month) => apiFetch(`/budgets?year=${year}&month=${month}`);\r\nexport const setBudget = (data) => apiFetch('/budgets', {\r\n    method: 'POST', // Backend menggunakan POST untuk create/update\r\n    body: JSON.stringify(data)\r\n});\r\nexport const getAvailableBudgetMonths = async () => {\r\n    const token = localStorage.getItem('userToken'); // Asumsi token otentikasi diperlukan\r\n    if (!token) throw new Error(\"No authentication token found.\");\r\n\r\n    try {\r\n        // Sesuaikan URL endpoint ini dengan yang akan Anda buat di backend\r\n        const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/budgets/available_months`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            },\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json();\r\n            throw new Error(errorData.message || 'Failed to fetch available budget months');\r\n        }\r\n        // Backend diharapkan mengembalikan array string seperti [\"2023-01\", \"2023-02\", \"2024-05\"]\r\n        const data = await response.json();\r\n        return data;\r\n    } catch (error) {\r\n        console.error(\"Error fetching available budget months:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// --- ACCOUNTS ---\r\nexport const updateAccount = (id, data) => apiFetch(`/accounts/${id}`, { method: 'PUT', body: JSON.stringify(data) });\r\nexport const deleteAccount = (id) => apiFetch(`/accounts/${id}`, { method: 'DELETE' });\r\nexport const getAccounts = () => apiFetch('/accounts');\r\nexport const createAccount = (data) => apiFetch('/accounts', {\r\n  method: 'POST',\r\n  body: JSON.stringify(data),\r\n});\r\n\r\n// --- DEBTS ---\r\nexport const getDebts = () => apiFetch('/debts');\r\n\r\nexport const createDebt = (data) => apiFetch('/debts', {\r\n  method: 'POST',\r\n  body: JSON.stringify(data),\r\n});\r\n\r\nexport const deleteDebt = (id) => apiFetch(`/debts/${id}`, {\r\n  method: 'DELETE',\r\n});\r\n\r\n// Menggunakan PATCH untuk update status\r\nexport const markDebtAsPaid = (id) => apiFetch(`/debts/${id}/status`, {\r\n  method: 'PATCH',\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}